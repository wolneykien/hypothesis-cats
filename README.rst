***************
hypothesis-cats
***************

`Hypothesis <https://hypothesis.readthedocs.io/en/latest/>`_ extension
which allows to classify values generated by a Hypothesis strategy and
then to make complex assertions based on the categories that consist up
the example data given to the test.

A basic example:

.. code:: python

   def my_sgn(x):
       return x > 0

   @given(x=integers())
   def test_naive(x):
       if x > 0:
           assert my_sgn(x)
       else:
           assert not my_sgn(x)

What's wrong with the test function above is that it tries
to check ``my_sgn()`` correctness using *the same logic* as
used in ``my_sgn()`` itself! Let's try to get things better:

.. code:: python

   @given(
       x=classify("x", one_of(
           cat("positive", integers(min_value=1)),
           cat("non-positive", integers(max_value=0))
       )),
       cts=cats()
   )
   def test_better(x, cts):
       if cts["x"] == "positive":
           assert my_sgn(x)
       else:
           assert not my_sgn(x)

The approach seems to be promising in testing validation functions
and other objects which behavior is determined by a number of
independent factors.
